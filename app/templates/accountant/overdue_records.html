{% extends "share/dashboard.html" %} {% block title %}Overdue Fee Records{%
endblock %} {% block card_header %}bg-danger{% endblock %} {% block card_title
%}Overdue Payments{% endblock %} {% block card_content %}

<div class="table-responsive">
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Fee Record ID</th>
        <th>Student Name</th>
        <th>Due Date</th>
        <th>Amount Due (RM)</th>
        <th>Late Fee (RM)</th>
        <th>Total Amount (RM)</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for fee in overdue_fees %}
      <tr>
        <td>{{ fee.fee_record_id }}</td>
        <td>
          {{ fee.assignment.student.first_name + " " +
          fee.assignment.student.last_name }}
        </td>
        <td>{{ fee.due_date.strftime('%Y-%m-%d') }}</td>
        <td>{{ fee.amount_due }}</td>
        <td>{{ fee.late_fee_amount }}</td>
        <td>{{ fee.total_amount }}</td>
        <td>
          <form method="POST" class="d-inline">
            <input
              type="hidden"
              name="fee_record_id"
              value="{{ fee.fee_record_id }}"
            />
            <button
              type="submit"
              class="btn btn-sm {% if fee.flagged_for_followup %}btn-secondary disabled{% else %}btn-warning{% endif %}"
            >
              {% if fee.flagged_for_followup %} Already Flagged {% else %} Flag
              for follow-ups {% endif %}
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% if not overdue_fees %}
<p class="text-center text-muted">No overdue payments found.</p>
{% endif %} {% endblock %}
